{% extends "base.html" %}

{% block title %}Protocol Record - {{ protocol.name }}{% endblock %}

{% block content %}
<div>
    {% if protocol.category == "animal_treatment" %}
        <h4>Animal Treatment - {{ protocol.name }}</h4>
    {% elif protocol.category == "msrun_protocol" %}
        <h4>Mass Spectrometry Protocol - {{ protocol.name }} </h4>
    {% endif %}

    <table class="table table-bordered table-hover w-auto mw-100">
        <tr>
            <td>Name</td>
            <td>{{ protocol.name }}</td>
        </tr>
        <tr>
            <td>Category</td>
            <td>{{ protocol.category }}</td>
        </tr>
        <tr>
            <td>Description</td>
            <td>{{ protocol.description }}</td>
        </tr>
    </table>
</div>
<br>
<div>
    {% if protocol.category == "animal_treatment" %}
        <h5>Studies using this protocol for animal treatment</h5>
    {% elif protocol.category == "msrun_protocol" %}
        <h5>Studies using this protocol for MSRuns</h5>
    {% endif %}
    <br>
    {% with out_df=df %}
        {% include "DataRepo/includes/study_list_stats_table.html" %}
    {% endwith %}
    <br>
</div>
{% endblock %}

{% block js_extras %}
    {{ block.super }}
    <script>
        let rowCount = {{ df|length }}
        let vScroll = undefined
        let tabHeight = undefined
        if ( rowCount < 5 ) {
            tabHeight = undefined
            vScroll = undefined
        } else if (rowCount >= 5 && rowCount < 10) {
            tabHeight = 800
            vScroll = true
        } else {
            tabHeight = 1000
            vScroll = true
        }

        $('#study_list_stats').bootstrapTable({
                height: tabHeight,
                virtualScroll: vScroll
        })
    </script>
{% endblock %}
