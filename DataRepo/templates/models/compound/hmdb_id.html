{% load bsttags %}

{% with column_value=object|get_rec_val:column %}
    <span class="{% if column.wrapped is False %}nobr{% endif %}{% if column.wrapped %} min-w25rem{% endif %}">
    {% if column_value is None or "Fake" in object|get_attr:"hmdb_id" %}
        <span class="text-muted">None</span>
    {% else %}
        {% if object|get_attr:"hmdb_url" %}
            {# Render model object in string context for the link's display value #}
            <a href="{{ object|get_attr:'hmdb_url' }}">{{ column_value }}</a>
        {% else %}
            {% if column.linked %}<a href="{{ object.get_absolute_url }}">{% endif %}
            {{ column_value }}
            {% if column.linked %}</a>{% endif %}
        {% endif %}
    {% endif %}
    </span>
{% endwith %}
